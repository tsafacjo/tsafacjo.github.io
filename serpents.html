<html>

<canvas   id="canvas" height="500" width="500"  >
<p>votre naviguateur ne supporte pas les canvas :</p>


</canvas>

<Script>
var scene = document.getElementById("canvas").getContext('2d');
var etat=0 ;
var pas=20 ;
var taille=20 ;
var tabX= new Array() ,tabY = new Array() ;
tabX.push(pas) ;
tabX.push(pas) ;
tabX.push(pas) ;
tabX.push(pas) ;
tabY.push(pas) ;
tabY.push(pas*2) ;
tabY.push(pas*3) ;
tabY.push(pas*4) ;

var xbonus=100,ybonus=100 ;
var imageBonus= new Image() ;
imageBonus.src= "B.png";


 //gestion des evenements 
 
document.addEventListener('keydown', function(e) {


if(e.keyCode==37&&etat!=1)

{

etat=2 ;


}
else if(e.keyCode==39&&etat!=2){

etat=1 ;



}

else if(e.keyCode==38&&etat!=3){

etat=4 ;

}

else if(e.keyCode==40&&etat!=4){

etat=3 ;
}
else
return ;

deplacement() ;



dessiner() ;

 
 }, true);

function deplacement(){

if(tabX[0]==xbonus&&tabY[0]==ybonus)
 genererPoint() ;


if(etat==1){

tabX[0]+=pas ;
for(var i=0;i<tabX.length-1;i++){

if(tabY[i+1]==tabY[i]){

tabX[i+1]+=pas;

}





else if(tabY[i+1]>tabY[i]){


tabY[i+1]-=pas ;


}


else {


tabY[i+1]+=pas ;


}




}



}







if(etat==2){

tabX[0]-=pas ;
for(var i=0;i<tabX.length-1;i++){

if(tabY[i+1]==tabY[i]){

tabX[i+1]-=pas;




}



else if(tabY[i+1]>tabY[i]){


tabY[i+1]-=pas ;


}


else {


tabY[i+1]+=pas ;


}




}



}





if(etat==3){

tabY[0]+=pas ;
for(var i=0;i<tabX.length-1;i++){

if(tabX[i+1]==tabX[i]){

tabY[i+1]+=pas ;




}



else if(tabX[i+1]>tabX[i]){


tabX[i+1]-=pas ;


}


else {


tabX[i+1]+=pas ;


}




}



}






if(etat==4){

tabY[0]-=pas ;
for(var i=0;i<tabX.length-1;i++){

if(tabX[i+1]==tabX[i]){

tabY[i+1]-=pas ;




}



else if(tabX[i+1]>tabX[i]){


tabX[i+1]-=pas ;


}


else {


tabX[i+1]+=pas ;


}




}



}





dessiner() ;

}


function dessiner(){

scene.clearRect(0,0,500,500) ;


scene.drawImage(imageBonus,xbonus,ybonus) ;

for(var i=0;i<tabX.length;i++){

scene.fillRect(tabX[i],tabY[i],20,20) ;

}

}


function genererPoint(){


tabX.push(tabX[tabX.length-1]+pas)  ;
tabY.push(tabY[tabX.length-1]+pas) ;

xbonus=Math.ceil(500*((Math.random())));
ybonus=Math.ceil(500*((Math.random()))) ;

}







//corps du jeux 

dessiner() 



</script>

</html>